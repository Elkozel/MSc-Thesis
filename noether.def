Bootstrap: docker
From: nvcr.io/nvidia/pyg:25.05-py3

%files
    ./noether /usr/src/noether
    ./requirements.txt /usr/src/noether/requirements.txt

%post
    # Update APT
    apt-get update && apt-get upgrade -y

    # Update pip
    python -m pip install --upgrade pip
    
    # Install project requirements
    pip install -r /usr/src/noether/requirements.txt

%runscript
    python3 /usr/src/noether/run.py "$@"

# apptainer run --bind /tudelft.net/staff-umbrella/noether/:/data/ /tudelft.net/staff-umbrella/noether/noether.sif